# 编辑器用户体验改进需求文档

## 介绍

本文档定义了桌面编辑器应用的全面用户体验改进需求，包括图标更新、编辑器功能优化、布局修复、导出功能增强、绘图模块重构、Wiki功能整合、界面简化和设置页面修复。这些改进旨在提供更专业、更流畅、更直观的小说写作体验。

## 术语表

- **编辑器系统**: 桌面小说编辑器应用程序
- **活动栏**: 应用程序左侧的主要导航栏，包含各种功能按钮
- **侧边栏**: 活动栏旁边的面板，显示不同功能的内容
- **书籍管理面板**: 显示和管理书籍列表的侧边栏面板
- **搜索面板**: 提供搜索功能的侧边栏面板
- **章节**: 书籍中的主要结构单元
- **场景**: 章节中的子结构单元
- **Wiki模块**: 统一的知识管理系统，包含角色、地图、势力、物品等信息
- **绘图模块**: 集成的绘图功能，用于创建图表、示意图等视觉内容
- **Tauri应用**: 使用Tauri框架打包的桌面应用程序
- **Excalidraw**: 集成的绘图组件库
- **GitHub工作流**: 自动化构建和打包流程

## 需求

### 需求 1

**用户故事:** 作为项目维护者，我希望更新应用图标并确保所有打包流程使用新图标，以便提供统一的品牌形象。

#### 验收标准

1. 当移除旧图标文件时，编辑器系统应清理所有相关的图标引用
2. 当基于new-icon.png生成新图标时，编辑器系统应创建所有必需的尺寸和格式
3. 当更新Tauri配置时，编辑器系统应使用新生成的图标文件
4. 当审查GitHub工作流时，编辑器系统应确保所有打包流程使用新图标
5. 当应用打包时，编辑器系统应在所有平台的安装包中包含新图标

### 需求 2

**用户故事:** 作为小说作者，我希望编辑器的格式化工具专注于写作需求，以便获得更简洁的编辑体验。

#### 验收标准

1. 当文本被选中时，编辑器系统应仅显示加粗和下划线格式化选项
2. 当用户需要设置背景颜色时，编辑器系统应提供背景颜色选择功能
3. 当用户需要设置字体颜色时，编辑器系统应提供字体颜色选择功能
4. 当移除其他格式化选项时，编辑器系统应保持界面的简洁性
5. 当应用格式化时，编辑器系统应正确保存和显示格式化效果

### 需求 3

**用户故事:** 作为编辑器用户，我希望编辑器界面完全适应窗口大小，以便获得最佳的编辑体验。

#### 验收标准

1. 当应用启动时，编辑器系统应确保内容完全适应窗口宽度
2. 当检测到横向溢出时，编辑器系统应识别并修复溢出源
3. 当调整窗口大小时，编辑器系统应动态调整布局以避免滚动条
4. 当修复溢出问题后，编辑器系统应确保所有内容在窗口内可见
5. 当布局调整时，编辑器系统应保持界面元素的正确对齐和间距

### 需求 4

**用户故事:** 作为桌面应用用户，我希望导出功能在Tauri应用中正常工作，以便能够导出我的作品。

#### 验收标准

1. 当在Tauri应用中触发导出时，编辑器系统应使用本地文件系统API
2. 当导出操作执行时，编辑器系统应提供文件保存对话框
3. 当导出完成时，编辑器系统应确认文件已成功保存到指定位置
4. 当导出失败时，编辑器系统应显示错误信息并提供重试选项
5. 当保持浏览器兼容性时，编辑器系统应根据运行环境选择适当的导出方式

### 需求 5

**用户故事:** 作为小说作者，我希望绘图功能作为独立的书籍资源进行管理，以便更好地组织我的创作素材。

#### 验收标准

1. 当重构绘图存储时，编辑器系统应将绘图从场景存储迁移到书籍级别存储
2. 当点击绘图功能时，编辑器系统应创建新的空白绘图而不是加载之前的内容
3. 当调整绘图窗口时，编辑器系统应确保绘图区域与写作窗口大小一致
4. 当处理Excalidraw尺寸限制时，编辑器系统应找到适当的解决方案
5. 当创建绘图时，编辑器系统应在右侧边栏显示绘图名称和管理选项

### 需求 6

**用户故事:** 作为小说作者，我希望将角色和地图功能合并为统一的Wiki系统，以便更灵活地管理创作资料。

#### 验收标准

1. 当合并角色和地图功能时，编辑器系统应创建统一的Wiki管理界面
2. 当在Wiki中创建条目时，编辑器系统应支持自定义名称和标签系统
3. 当编辑Wiki条目时，编辑器系统应提供富文本编辑功能
4. 当在编辑页面中引用时，编辑器系统应支持Wiki条目的快速引用
5. 当管理Wiki条目时，编辑器系统应支持分类、搜索和组织功能

### 需求 7

**用户故事:** 作为编辑器用户，我希望界面布局更加简洁，以便减少视觉干扰。

#### 验收标准

1. 当简化界面时，编辑器系统应移除书籍管理侧边栏下方的重复按钮
2. 当保留活动栏按钮时，编辑器系统应确保更多按钮功能完整可用
3. 当移除重复元素后，编辑器系统应保持所有功能的可访问性
4. 当优化布局时，编辑器系统应提供更清晰的视觉层次
5. 当简化完成后，编辑器系统应确保用户体验的一致性

### 需求 8

**用户故事:** 作为编辑器用户，我希望移除不必要的引导功能，以便获得更简洁的界面。

#### 验收标准

1. 当移除引导功能时，编辑器系统应清理所有相关的UI组件
2. 当删除引导代码时，编辑器系统应确保不影响其他功能
3. 当简化界面后，编辑器系统应保持界面的整洁性
4. 当移除引导元素时，编辑器系统应优化剩余界面元素的布局
5. 当清理完成后，编辑器系统应确保应用的稳定性

### 需求 9

**用户故事:** 作为编辑器用户，我希望设置页面的滚动行为正确，以便获得良好的浏览体验。

#### 验收标准

1. 当在设置页面滚动时，编辑器系统应确保活动栏保持固定位置
2. 当页面内容超出视窗时，编辑器系统应仅滚动内容区域
3. 当修复滚动问题时，编辑器系统应保持页面布局的稳定性
4. 当滚动操作执行时，编辑器系统应提供流畅的滚动体验
5. 当布局修复后，编辑器系统应确保所有设置选项都可正常访问