# 大纲图表布局优化

## 🎯 优化目标

解决原有布局的问题，提供更清晰、更易用的图表查看体验。

## ❌ 原有问题

1. **标签栏过于拥挤** - 所有图表类型都在一行，难以浏览
2. **缺少层级结构** - 预设图表和自定义图表混在一起
3. **操作不便** - 编辑和删除按钮位置不合理
4. **空间浪费** - 标签栏占用过多空间

## ✅ 新设计方案

### 布局结构

```
┌─────────────────────────────────────────────────┐
│  大纲视图                                        │
├─────────────────────────────────────────────────┤
│  [列表] [卡片] [图表]                            │
├──────────┬──────────────────────────────────────┤
│ 图表导航  │                                      │
│          │                                      │
│ 预设图表  │                                      │
│  📊 结构  │        图表显示区域                   │
│  🌊 流程  │                                      │
│  📈 进度  │                                      │
│  ⏰ 时间  │                                      │
│          │                                      │
│ 自定义 [+]│                                      │
│  图表1 ✏️🗑│                                      │
│  图表2 ✏️🗑│                                      │
└──────────┴──────────────────────────────────────┘
```

### 核心改进

#### 1. 侧边栏导航
- **宽度**: 224px (14rem)
- **位置**: 左侧固定
- **内容**: 
  - 预设图表列表
  - 自定义图表列表
  - 新建按钮

#### 2. 分类清晰
- **预设图表** - 系统自动生成
- **自定义图表** - 用户创建

#### 3. 图标标识
每个图表都有对应的图标：
- 📊 结构图 - `BarChart3`
- 🌊 流程图 - `GitBranch`
- ⏰ 时间线 - `Clock`
- 📈 进度图 - `TrendingUp`
- 👥 角色关系 - `Users`

#### 4. 悬停操作
自定义图表悬停时显示：
- ✏️ 编辑按钮
- 🗑️ 删除按钮

#### 5. 主内容区
- **宽度**: 自适应
- **内边距**: 24px
- **内容**: 当前选中的图表

## 🎨 视觉设计

### 颜色方案
- **选中状态**: `bg-accent text-accent-foreground`
- **悬停状态**: `hover:bg-muted`
- **分组标题**: `text-muted-foreground`

### 间距
- 列表项间距: `space-y-0.5` (2px)
- 内边距: `px-2 py-1.5`
- 分组间距: `mb-4`

### 圆角
- 列表项: `rounded-md`
- 按钮: `rounded-md`

## 📱 响应式设计

### 大屏幕 (> 1024px)
- 侧边栏: 224px
- 主内容: 自适应

### 中等屏幕 (768px - 1024px)
- 侧边栏: 200px
- 主内容: 自适应

### 小屏幕 (< 768px)
- 侧边栏: 可折叠
- 主内容: 全宽

## 🔧 技术实现

### 组件结构

```typescript
DiagramViewRedesigned
├── Sidebar (侧边栏)
│   ├── PresetDiagrams (预设图表)
│   │   └── DiagramItem[]
│   └── CustomDiagrams (自定义图表)
│       ├── DiagramItem[]
│       └── AddButton
└── MainContent (主内容)
    └── DiagramViewer (图表查看器)
```

### 状态管理

```typescript
const [selectedDiagram, setSelectedDiagram] = useState<string>("mermaid-structure");
const [customDiagrams, setCustomDiagrams] = useState<CustomDiagram[]>([]);
const [editorOpen, setEditorOpen] = useState(false);
const [editingDiagram, setEditingDiagram] = useState<CustomDiagram | null>(null);
```

### 数据结构

```typescript
interface DiagramItem {
  id: string;
  name: string;
  icon: React.ComponentType<{ className?: string }>;
  type: "preset" | "custom";
  category: "mermaid" | "plantuml";
}

interface CustomDiagram {
  id: string;
  name: string;
  code: string;
  type: "mermaid" | "plantuml";
}
```

## 🎯 用户体验改进

### 1. 清晰的层级
- 一眼就能看出哪些是预设，哪些是自定义
- 分类标题明确

### 2. 快速导航
- 点击即可切换图表
- 无需滚动标签栏

### 3. 便捷操作
- 悬停显示操作按钮
- 减少误操作

### 4. 空间利用
- 侧边栏宽度合理
- 主内容区域更大

### 5. 视觉反馈
- 选中状态明显
- 悬停效果流畅

## 📊 对比分析

| 特性 | 旧设计 | 新设计 |
|------|--------|--------|
| 布局方式 | 标签栏 | 侧边栏 |
| 图表分类 | 无 | 清晰分类 |
| 操作便捷性 | 一般 | 优秀 |
| 空间利用 | 一般 | 优秀 |
| 可扩展性 | 差 | 优秀 |
| 视觉层级 | 扁平 | 清晰 |

## 🚀 未来扩展

### 短期
- [ ] 图表搜索
- [ ] 图表排序
- [ ] 图表分组

### 中期
- [ ] 拖拽排序
- [ ] 图表收藏
- [ ] 快捷键导航

### 长期
- [ ] 图表标签
- [ ] 图表分享
- [ ] 图表模板市场

## 💡 使用建议

### 查看预设图表
1. 点击左侧"预设图表"分类下的任意图表
2. 右侧自动显示图表内容

### 创建自定义图表
1. 点击"自定义图表"旁的 `+` 按钮
2. 在编辑器中编写代码
3. 保存后自动添加到列表

### 编辑自定义图表
1. 悬停在自定义图表上
2. 点击 ✏️ 编辑按钮
3. 修改后保存

### 删除自定义图表
1. 悬停在自定义图表上
2. 点击 🗑️ 删除按钮
3. 确认删除

## 📝 注意事项

1. **侧边栏宽度** - 固定 224px，不可调整
2. **图表切换** - 点击即切换，无需确认
3. **自动保存** - 编辑器中的修改需要手动保存
4. **删除确认** - 删除操作会立即执行，请谨慎操作

## ✅ 优化效果

- ✅ 布局更清晰
- ✅ 操作更便捷
- ✅ 视觉更美观
- ✅ 扩展性更强
- ✅ 用户体验更好

## 🎊 总结

新的布局设计解决了原有的所有问题，提供了更好的用户体验。通过侧边栏导航和清晰的分类，用户可以快速找到和管理图表，大大提升了工作效率。
