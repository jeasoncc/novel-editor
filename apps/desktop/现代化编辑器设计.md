# 现代化编辑器设计 - VS Code 风格

## 🎨 设计理念

参考 VS Code 的设计语言，打造专业、美观、高效的代码编辑器体验。

## 核心特点

### 1. **VS Code 配色方案**
```css
/* 主背景 */
bg-[#1e1e1e]      /* 编辑器背景 - 深灰色 */
bg-[#252526]      /* 标签栏背景 */
bg-[#323233]      /* 标题栏背景 */

/* 文字颜色 */
text-[#d4d4d4]    /* 主文字 - 浅灰色 */
text-[#cccccc]    /* 次要文字 */
text-[#858585]    /* 行号、提示文字 */

/* 边框 */
border-[#2d2d30]  /* 分隔线 */

/* 强调色 */
bg-[#3794ff]      /* 主题蓝 - 选中状态 */
bg-[#007acc]      /* 状态栏蓝 */
bg-[#0e639c]      /* 按钮蓝 */

/* 悬停 */
hover:bg-[#2a2d2e]  /* 悬停背景 */
```

### 2. **专业的标题栏**
- 高度：48px
- 背景：`#323233`
- 包含：
  - 编辑器图标和标题
  - 类型切换按钮
  - 模板选择
  - 视图模式切换
  - 保存和关闭按钮

### 3. **标签栏设计**
- 高度：36px
- 背景：`#252526`
- 显示当前文件名和图标
- 圆角顶部标签

### 4. **行号显示**
- 宽度：48px
- 背景：`#1e1e1e`
- 文字：`#858585`
- 右对齐
- 等宽字体

### 5. **代码编辑区**
- 背景：`#1e1e1e`
- 文字：`#d4d4d4`
- 光标：`#aeafad`
- 等宽字体
- 行高：24px (1.5rem)

### 6. **状态栏**
- 高度：24px
- 背景：`#007acc`（VS Code 蓝）
- 文字：白色
- 显示：语言、编码、行数、字符数

### 7. **预览区域**
- 标签栏：与代码区一致
- 背景：白色（浅色模式）/ `#252526`（深色模式）
- 内边距：24px

## 布局结构

```
┌─────────────────────────────────────────────────────┐
│ 🔵 图表编辑器  [Mermaid][PlantUML] [模板▼] [视图] [保存][×]│
├─────────────────────────────────────────────────────┤
│ 📝 diagram.mmd                │ 👁️ 预览              │
├────┬────────────────────────────┼─────────────────────┤
│ 1  │ graph TD                  │                     │
│ 2  │     A[开始] --> B[步骤1]   │    [图表显示]        │
│ 3  │     B --> C[步骤2]        │                     │
│ 4  │     C --> D[结束]         │                     │
│    │                           │                     │
├────┴────────────────────────────┴─────────────────────┤
│ Mermaid  UTF-8              第 4 行  100 字符        │
└─────────────────────────────────────────────────────┘
```

## 交互细节

### 1. 类型切换按钮
```tsx
<button className={cn(
  "px-3 py-1 text-xs rounded transition-colors",
  active 
    ? "bg-[#3794ff] text-white"
    : "text-[#cccccc] hover:bg-[#2a2d2e]"
)}>
  <Icon className="h-3 w-3 inline mr-1" />
  文字
</button>
```

### 2. 视图模式按钮
```tsx
<button className={cn(
  "p-1.5 rounded transition-colors",
  active
    ? "bg-[#37373d] text-white"
    : "text-[#cccccc] hover:bg-[#2a2d2e]"
)}>
  <Icon className="h-4 w-4" />
</button>
```

### 3. 保存按钮
```tsx
<Button className="h-7 px-3 text-xs bg-[#0e639c] hover:bg-[#1177bb] text-white">
  <Save className="h-3 w-3 mr-1.5" />
  保存
</Button>
```

### 4. 行号显示
```tsx
<div className="w-12 bg-[#1e1e1e] border-r border-[#2d2d30] text-right pr-2 text-xs text-[#858585] font-mono">
  {Array.from({ length: lineCount }, (_, i) => (
    <div key={i} className="leading-6">{i + 1}</div>
  ))}
</div>
```

### 5. 代码输入区
```tsx
<Textarea
  className="pl-14 pr-4 py-3 font-mono text-sm bg-[#1e1e1e] text-[#d4d4d4] leading-6"
  style={{ caretColor: '#aeafad' }}
/>
```

### 6. 状态栏
```tsx
<div className="h-6 px-3 bg-[#007acc] text-white text-xs">
  <div>Mermaid · UTF-8</div>
  <div>第 {lineCount} 行 · {charCount} 字符</div>
</div>
```

## 键盘快捷键

- `Ctrl/Cmd + S` - 保存
- `Esc` - 关闭编辑器

## 响应式设计

### 对话框尺寸
- 宽度：`90vw`（视口宽度的 90%）
- 高度：`90vh`（视口高度的 90%）
- 最大化利用屏幕空间

### 分屏模式
- 代码区：50%
- 预览区：50%
- 可以切换为单视图

## 深色模式适配

编辑器本身使用 VS Code 深色主题，但预览区域会根据系统主题切换：

```tsx
<div className="bg-white dark:bg-[#252526]">
  {/* 预览内容 */}
</div>
```

## 字体设置

### 代码字体
- 等宽字体：`font-mono`
- 字号：`text-sm` (14px)
- 行高：`leading-6` (24px)

### UI 字体
- 系统字体：默认
- 字号：`text-xs` (12px) / `text-sm` (14px)

## 动画效果

### 过渡动画
```css
transition-colors  /* 颜色过渡 */
```

### 悬停效果
```css
hover:bg-[#2a2d2e]  /* 背景变化 */
```

## 空状态设计

```tsx
<div className="flex items-center justify-center h-full">
  <div className="text-center text-[#858585]">
    <Icon className="h-16 w-16 mx-auto mb-4 opacity-20" />
    <p className="text-sm">在左侧输入代码</p>
    <p className="text-xs mt-2">预览将自动显示</p>
  </div>
</div>
```

## 对比效果

### 之前
- ❌ 配色单调
- ❌ 布局混乱
- ❌ 缺少细节
- ❌ 不够专业

### 现在
- ✅ VS Code 配色
- ✅ 专业布局
- ✅ 细节丰富
- ✅ 高度还原

## 技术实现

### 行号生成
```typescript
const lineCount = code.split('\n').length;

<div>
  {Array.from({ length: lineCount }, (_, i) => (
    <div key={i}>{i + 1}</div>
  ))}
</div>
```

### 光标颜色
```typescript
<Textarea
  style={{ caretColor: '#aeafad' }}
/>
```

### 文件名显示
```typescript
const fileName = `diagram.${diagramType === "mermaid" ? "mmd" : "puml"}`;
```

## 用户体验

### 1. 专业感
- VS Code 风格让开发者感到熟悉
- 配色舒适，长时间使用不累眼

### 2. 功能完整
- 行号显示
- 状态栏信息
- 文件标签
- 快捷键支持

### 3. 视觉统一
- 所有元素风格一致
- 颜色搭配和谐
- 间距规范统一

### 4. 操作流畅
- 过渡动画自然
- 响应及时
- 反馈明确

## 总结

新的编辑器设计完全参考 VS Code 的设计语言，提供了：

- 🎨 **专业的视觉设计** - VS Code 配色方案
- 📝 **完整的编辑功能** - 行号、状态栏、标签
- ⚡ **流畅的交互体验** - 快捷键、动画、反馈
- 🎯 **熟悉的操作方式** - 开发者友好

这是一个真正专业、美观、好用的代码编辑器！
