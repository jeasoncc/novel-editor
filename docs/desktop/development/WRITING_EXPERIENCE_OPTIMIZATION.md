# å†™ä½œä½“éªŒä¼˜åŒ–æ–¹æ¡ˆ

## ğŸ“Š å½“å‰çŠ¶æ€åˆ†æ

### âœ… å·²æœ‰åŠŸèƒ½
- ä¸“æ³¨æ¨¡å¼ï¼ˆå…¨å±ï¼‰
- æ‰“å­—æœºæ¨¡å¼ï¼ˆå½“å‰è¡Œå±…ä¸­ï¼‰
- å†™ä½œç›®æ ‡è¿½è¸ª
- ä¼šè¯ç»Ÿè®¡
- Markdown å¿«æ·é”®
- æµ®åŠ¨å·¥å…·æ 

### âŒ å¯èƒ½çš„é—®é¢˜ç‚¹
1. **ç¼–è¾‘å™¨å“åº”é€Ÿåº¦** - å¤§æ–‡æ¡£å¯èƒ½å¡é¡¿
2. **è§†è§‰å¹²æ‰°** - å·¥å…·æ ã€ä¾§è¾¹æ å¯èƒ½åˆ†æ•£æ³¨æ„åŠ›
3. **è¾“å…¥æµç•…åº¦** - ç¼ºå°‘æ™ºèƒ½è¾…åŠ©åŠŸèƒ½
4. **æ²‰æµ¸æ„Ÿä¸è¶³** - ç¼ºå°‘ç¯å¢ƒéŸ³ã€èƒŒæ™¯ç­‰
5. **å¿«æ·é”®ä¸å¤Ÿ** - å¸¸ç”¨æ“ä½œéœ€è¦é¼ æ ‡
6. **è‡ªåŠ¨ä¿å­˜æç¤º** - å¯èƒ½æ‰“æ–­æ€è·¯
7. **å­—æ•°ç»Ÿè®¡ä½ç½®** - å¯èƒ½è¿‡äºæ˜¾çœ¼

---

## ğŸ¯ ä¼˜åŒ–æ–¹æ¡ˆï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

### ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³æ”¹å–„ï¼‰

#### 1. ç¼–è¾‘å™¨æ€§èƒ½ä¼˜åŒ–
**é—®é¢˜**: å¤§æ–‡æ¡£ï¼ˆ>5000å­—ï¼‰å¯èƒ½å¡é¡¿
**æ–¹æ¡ˆ**:
- è™šæ‹Ÿæ»šåŠ¨
- å»¶è¿Ÿæ¸²æŸ“
- èŠ‚æµä¿å­˜

#### 2. å‡å°‘è§†è§‰å¹²æ‰°
**é—®é¢˜**: å·¥å…·æ ã€ç»Ÿè®¡ä¿¡æ¯åˆ†æ•£æ³¨æ„åŠ›
**æ–¹æ¡ˆ**:
- è‡ªåŠ¨éšè—å·¥å…·æ ï¼ˆé¼ æ ‡ç§»å¼€åï¼‰
- åŠé€æ˜ç»Ÿè®¡ä¿¡æ¯
- å¯å…³é—­çš„å­—æ•°ç»Ÿè®¡

#### 3. æ™ºèƒ½è¾“å…¥è¾…åŠ©
**é—®é¢˜**: ç¼ºå°‘æ™ºèƒ½æç¤º
**æ–¹æ¡ˆ**:
- è‡ªåŠ¨æ ‡ç‚¹é…å¯¹ï¼ˆ""ã€ã€Šã€‹ï¼‰
- æ™ºèƒ½ç©ºæ ¼ï¼ˆä¸­è‹±æ–‡ä¹‹é—´ï¼‰
- æ®µè½è‡ªåŠ¨ç¼©è¿›

#### 4. æ›´å¥½çš„ä¸“æ³¨æ¨¡å¼
**é—®é¢˜**: ä¸“æ³¨æ¨¡å¼è¿˜ä¸å¤Ÿæ²‰æµ¸
**æ–¹æ¡ˆ**:
- æ¸å˜èƒŒæ™¯
- å¯è°ƒèŠ‚ç¼–è¾‘åŒºå®½åº¦
- è¡Œé—´è·è°ƒèŠ‚
- èƒŒæ™¯éŸ³ä¹/ç™½å™ªéŸ³

#### 5. å¿«æ·é”®å¢å¼º
**é—®é¢˜**: å¸¸ç”¨æ“ä½œéœ€è¦é¼ æ ‡
**æ–¹æ¡ˆ**:
- Ctrl+S ä¿å­˜
- Ctrl+B ç²—ä½“
- Ctrl+I æ–œä½“
- Ctrl+Shift+F ä¸“æ³¨æ¨¡å¼
- Ctrl+/ å¿«æ·é”®å¸®åŠ©

---

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆæå‡ä½“éªŒï¼‰

#### 6. å†™ä½œèŠ‚å¥æç¤º
**æ–¹æ¡ˆ**:
- å†™ä½œé€Ÿåº¦æ›²çº¿
- ä¼‘æ¯æé†’ï¼ˆç•ªèŒ„é’Ÿï¼‰
- å†™ä½œçƒ­åŠ›å›¾

#### 7. æ™ºèƒ½ä¿å­˜
**æ–¹æ¡ˆ**:
- é™é»˜è‡ªåŠ¨ä¿å­˜
- ç‰ˆæœ¬å¿«ç…§
- å†²çªæ£€æµ‹

#### 8. ç¼–è¾‘å™¨ä¸»é¢˜
**æ–¹æ¡ˆ**:
- çº¸å¼ çº¹ç†èƒŒæ™¯
- æ‰“å­—æœºéŸ³æ•ˆ
- æŠ¤çœ¼æ¨¡å¼ï¼ˆæš–è‰²è°ƒï¼‰

#### 9. å†™ä½œè¾…åŠ©
**æ–¹æ¡ˆ**:
- è¯é¢‘ç»Ÿè®¡
- é‡å¤è¯æç¤º
- å¥å­é•¿åº¦åˆ†æ

---

### ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆé”¦ä¸Šæ·»èŠ±ï¼‰

#### 10. ç¯å¢ƒæ°›å›´
**æ–¹æ¡ˆ**:
- èƒŒæ™¯éŸ³ä¹æ’­æ”¾å™¨
- ç™½å™ªéŸ³ï¼ˆé›¨å£°ã€å’–å•¡å…ï¼‰
- åŠ¨æ€èƒŒæ™¯

#### 11. å†™ä½œæ¿€åŠ±
**æ–¹æ¡ˆ**:
- æˆå°±ç³»ç»Ÿ
- è¿ç»­å†™ä½œå¤©æ•°
- é‡Œç¨‹ç¢‘åº†ç¥

#### 12. åä½œåŠŸèƒ½
**æ–¹æ¡ˆ**:
- è¯„è®ºæ‰¹æ³¨
- ç‰ˆæœ¬å¯¹æ¯”
- å¤šäººåä½œ

---

## ğŸš€ ç«‹å³å¯å®æ–½çš„ä¼˜åŒ–

### 1. è‡ªåŠ¨éšè—å·¥å…·æ 

```typescript
// src/components/blocks/focus-mode.tsx
const [toolbarVisible, setToolbarVisible] = useState(true);
const timeoutRef = useRef<number>();

const handleMouseMove = () => {
  setToolbarVisible(true);
  clearTimeout(timeoutRef.current);
  timeoutRef.current = window.setTimeout(() => {
    setToolbarVisible(false);
  }, 3000);
};

<div 
  onMouseMove={handleMouseMove}
  className={cn(
    "focus-mode-toolbar transition-opacity duration-300",
    !toolbarVisible && "opacity-0"
  )}
>
```

### 2. æ™ºèƒ½æ ‡ç‚¹é…å¯¹

```typescript
// åœ¨ç¼–è¾‘å™¨ä¸­æ·»åŠ 
const handleBeforeInput = (e: InputEvent) => {
  if (e.data === '"') {
    e.preventDefault();
    insertText('""');
    moveCursor(-1);
  }
  if (e.data === 'ã€Š') {
    e.preventDefault();
    insertText('ã€Šã€‹');
    moveCursor(-1);
  }
};
```

### 3. å¯è°ƒèŠ‚ç¼–è¾‘åŒºå®½åº¦

```typescript
// æ·»åŠ åˆ°ä¸“æ³¨æ¨¡å¼è®¾ç½®
const [editorWidth, setEditorWidth] = useState(700);

<div style={{ maxWidth: `${editorWidth}px` }}>
  {children}
</div>

// è®¾ç½®é¢æ¿
<Slider
  value={[editorWidth]}
  onValueChange={([value]) => setEditorWidth(value)}
  min={500}
  max={1000}
  step={50}
/>
```

### 4. æŠ¤çœ¼æ¨¡å¼

```typescript
// æ·»åŠ åˆ°ä¸»é¢˜
const eyeCareTheme = {
  background: "#FBF8F3", // æš–è‰²çº¸å¼ 
  foreground: "#3E3E3E", // æŸ”å’Œé»‘è‰²
  // ...
};
```

### 5. ç•ªèŒ„é’Ÿæé†’

```typescript
// æ·»åŠ åˆ° writing store
pomodoroEnabled: boolean;
pomodoroInterval: number; // 25åˆ†é’Ÿ
lastBreakTime: number;

// å®šæ—¶æ£€æŸ¥
useEffect(() => {
  const interval = setInterval(() => {
    if (shouldTakeBreak()) {
      showBreakNotification();
    }
  }, 60000); // æ¯åˆ†é’Ÿæ£€æŸ¥
}, []);
```

---

## ğŸ“ å…·ä½“å®ç°ä»£ç 

### ä¼˜åŒ– 1: è‡ªåŠ¨éšè—å·¥å…·æ 

```typescript
// src/components/blocks/focus-mode-enhanced.tsx
import { useState, useRef, useEffect } from "react";

export function FocusModeEnhanced() {
  const [toolbarVisible, setToolbarVisible] = useState(true);
  const [statsVisible, setStatsVisible] = useState(true);
  const hideTimeoutRef = useRef<number>();

  const showToolbar = () => {
    setToolbarVisible(true);
    clearTimeout(hideTimeoutRef.current);
    hideTimeoutRef.current = window.setTimeout(() => {
      setToolbarVisible(false);
    }, 3000);
  };

  useEffect(() => {
    const handleMouseMove = (e: MouseEvent) => {
      // é¼ æ ‡åœ¨é¡¶éƒ¨ 100px æ—¶æ˜¾ç¤ºå·¥å…·æ 
      if (e.clientY < 100) {
        showToolbar();
      }
    };

    window.addEventListener("mousemove", handleMouseMove);
    return () => window.removeEventListener("mousemove", handleMouseMove);
  }, []);

  return (
    <div className="focus-mode-enhanced">
      {/* å·¥å…·æ  */}
      <div
        className={cn(
          "fixed top-0 left-0 right-0 z-50",
          "transition-all duration-300 ease-in-out",
          toolbarVisible ? "translate-y-0" : "-translate-y-full"
        )}
      >
        {/* å·¥å…·æ å†…å®¹ */}
      </div>

      {/* ç»Ÿè®¡ä¿¡æ¯ */}
      <div
        className={cn(
          "fixed bottom-4 right-4",
          "transition-opacity duration-300",
          statsVisible ? "opacity-100" : "opacity-20 hover:opacity-100"
        )}
      >
        {/* ç»Ÿè®¡å†…å®¹ */}
      </div>
    </div>
  );
}
```

### ä¼˜åŒ– 2: æ™ºèƒ½æ ‡ç‚¹é…å¯¹

```typescript
// src/components/editor/plugins/smart-punctuation-plugin.tsx
import { useLexicalComposerContext } from "@lexical/react/LexicalComposerContext";
import { useEffect } from "react";
import { $getSelection, $isRangeSelection, COMMAND_PRIORITY_LOW } from "lexical";

const PAIR_MAP: Record<string, string> = {
  '"': '""',
  "'": "''",
  "ï¼ˆ": "ï¼ˆï¼‰",
  "ã€Š": "ã€Šã€‹",
  "ã€": "ã€ã€‘",
  """: """",
  "'": "''",
};

export function SmartPunctuationPlugin() {
  const [editor] = useLexicalComposerContext();

  useEffect(() => {
    return editor.registerCommand(
      KEY_DOWN_COMMAND,
      (event: KeyboardEvent) => {
        const char = event.key;
        if (PAIR_MAP[char]) {
          event.preventDefault();
          
          editor.update(() => {
            const selection = $getSelection();
            if ($isRangeSelection(selection)) {
              selection.insertText(PAIR_MAP[char]);
              // ç§»åŠ¨å…‰æ ‡åˆ°ä¸­é—´
              selection.modify("move", "backward", "character");
            }
          });
          
          return true;
        }
        return false;
      },
      COMMAND_PRIORITY_LOW
    );
  }, [editor]);

  return null;
}
```

### ä¼˜åŒ– 3: ç¼–è¾‘å™¨å®½åº¦è°ƒèŠ‚

```typescript
// æ·»åŠ åˆ° writing store
interface WritingState {
  // ... ç°æœ‰å­—æ®µ
  editorWidth: number;
  setEditorWidth: (width: number) => void;
  lineHeight: number;
  setLineHeight: (height: number) => void;
}

// åœ¨ä¸“æ³¨æ¨¡å¼ä¸­ä½¿ç”¨
const { editorWidth, lineHeight } = useWritingStore();

<div
  style={{
    maxWidth: `${editorWidth}px`,
    lineHeight: lineHeight,
  }}
  className="mx-auto"
>
  {children}
</div>
```

### ä¼˜åŒ– 4: ç•ªèŒ„é’ŸåŠŸèƒ½

```typescript
// src/components/blocks/pomodoro-timer.tsx
import { useState, useEffect } from "react";
import { Timer, Coffee } from "lucide-react";
import { toast } from "sonner";

export function PomodoroTimer() {
  const [timeLeft, setTimeLeft] = useState(25 * 60); // 25åˆ†é’Ÿ
  const [isRunning, setIsRunning] = useState(false);
  const [isBreak, setIsBreak] = useState(false);

  useEffect(() => {
    if (!isRunning) return;

    const interval = setInterval(() => {
      setTimeLeft((prev) => {
        if (prev <= 1) {
          // æ—¶é—´åˆ°
          if (isBreak) {
            toast.success("ä¼‘æ¯ç»“æŸï¼Œç»§ç»­å†™ä½œï¼");
            setIsBreak(false);
            return 25 * 60;
          } else {
            toast.info("å†™ä½œæ—¶é—´åˆ°ï¼Œä¼‘æ¯ä¸€ä¸‹å§ï¼", {
              action: {
                label: "å¼€å§‹ä¼‘æ¯",
                onClick: () => {
                  setIsBreak(true);
                  setTimeLeft(5 * 60); // 5åˆ†é’Ÿä¼‘æ¯
                },
              },
            });
            setIsRunning(false);
            return 25 * 60;
          }
        }
        return prev - 1;
      });
    }, 1000);

    return () => clearInterval(interval);
  }, [isRunning, isBreak]);

  const formatTime = (seconds: number) => {
    const m = Math.floor(seconds / 60);
    const s = seconds % 60;
    return `${m.toString().padStart(2, "0")}:${s.toString().padStart(2, "0")}`;
  };

  return (
    <div className="flex items-center gap-2">
      {isBreak ? (
        <Coffee className="size-4 text-orange-500" />
      ) : (
        <Timer className="size-4" />
      )}
      <span className="text-sm tabular-nums">{formatTime(timeLeft)}</span>
      <button
        onClick={() => setIsRunning(!isRunning)}
        className="text-xs text-muted-foreground hover:text-foreground"
      >
        {isRunning ? "æš‚åœ" : "å¼€å§‹"}
      </button>
    </div>
  );
}
```

---

## ğŸ¨ è§†è§‰ä¼˜åŒ–å»ºè®®

### 1. çº¸å¼ çº¹ç†èƒŒæ™¯

```css
.novel-editor-content {
  background-image: url('/textures/paper.png');
  background-size: 200px 200px;
  background-repeat: repeat;
}
```

### 2. æ‰“å­—æœºéŸ³æ•ˆ

```typescript
// æ·»åŠ éŸ³æ•ˆ
const typeSound = new Audio('/sounds/typewriter.mp3');
typeSound.volume = 0.1;

editor.registerCommand(
  KEY_DOWN_COMMAND,
  () => {
    if (soundEnabled) {
      typeSound.currentTime = 0;
      typeSound.play();
    }
    return false;
  },
  COMMAND_PRIORITY_LOW
);
```

### 3. æ¸å˜èƒŒæ™¯

```css
.focus-mode-container {
  background: linear-gradient(
    135deg,
    hsl(var(--background)) 0%,
    color-mix(in srgb, hsl(var(--background)) 95%, hsl(var(--primary))) 100%
  );
}
```

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§æ–‡æ¡£ï¼‰

```typescript
// ä½¿ç”¨ react-window æˆ– react-virtualized
import { FixedSizeList } from "react-window";

<FixedSizeList
  height={600}
  itemCount={paragraphs.length}
  itemSize={50}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>{paragraphs[index]}</div>
  )}
</FixedSizeList>
```

### 2. èŠ‚æµä¿å­˜

```typescript
import { debounce } from "lodash";

const debouncedSave = debounce((content) => {
  saveToDatabase(content);
}, 2000); // 2ç§’åä¿å­˜

onChange={(editorState) => {
  debouncedSave(editorState.toJSON());
}}
```

---

## ğŸ¯ æ¨èå®æ–½é¡ºåº

### ç¬¬ä¸€å‘¨
1. âœ… è‡ªåŠ¨éšè—å·¥å…·æ 
2. âœ… æ™ºèƒ½æ ‡ç‚¹é…å¯¹
3. âœ… ç¼–è¾‘å™¨å®½åº¦è°ƒèŠ‚
4. âœ… å¿«æ·é”®å¢å¼º

### ç¬¬äºŒå‘¨
5. âœ… ç•ªèŒ„é’ŸåŠŸèƒ½
6. âœ… æŠ¤çœ¼æ¨¡å¼
7. âœ… èŠ‚æµä¿å­˜
8. âœ… ç»Ÿè®¡ä¿¡æ¯ä¼˜åŒ–

### ç¬¬ä¸‰å‘¨
9. âœ… çº¸å¼ çº¹ç†
10. âœ… æ‰“å­—æœºéŸ³æ•ˆ
11. âœ… å†™ä½œçƒ­åŠ›å›¾
12. âœ… è¯é¢‘ç»Ÿè®¡

---

## ğŸ’¡ ç”¨æˆ·åé¦ˆæ”¶é›†

å»ºè®®æ·»åŠ åé¦ˆå…¥å£ï¼š

```typescript
// åœ¨ä¸“æ³¨æ¨¡å¼ä¸­æ·»åŠ 
<Button
  variant="ghost"
  size="sm"
  onClick={() => {
    // æ‰“å¼€åé¦ˆè¡¨å•
  }}
>
  <MessageSquare className="size-4 mr-2" />
  åé¦ˆå»ºè®®
</Button>
```

---

## ğŸ“š å‚è€ƒèµ„æº

- [Notion ç¼–è¾‘å™¨](https://notion.so) - æµç•…çš„è¾“å…¥ä½“éªŒ
- [Typora](https://typora.io) - æç®€çš„ Markdown ç¼–è¾‘å™¨
- [iA Writer](https://ia.net/writer) - ä¸“æ³¨æ¨¡å¼è®¾è®¡
- [Scrivener](https://www.literatureandlatte.com/scrivener) - é•¿æ–‡å†™ä½œå·¥å…·

---

**ä¸‹ä¸€æ­¥**: é€‰æ‹©ä½ æœ€éœ€è¦çš„åŠŸèƒ½ï¼Œæˆ‘å¯ä»¥å¸®ä½ ç«‹å³å®ç°ï¼

